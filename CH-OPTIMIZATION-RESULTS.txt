CH Function Optimization Results
======================================================================

CH Function: Changed from 9-NAND to 4-NAND implementation
  - Old: CH(e,f,g) = (e AND f) XOR ((NOT e) AND g)  [9 NANDs]
  - New: Direct MUX form using 4 NANDs
  - Savings: 5 NANDs per function × 2,048 uses = 10,240 gate potential

CIRCUIT GENERATION (Unoptimized):
  Old (9-NAND CH):     510,208 gates
  New (4-NAND CH):     461,568 gates
  Immediate savings:    48,640 gates (9.5%)

FULL OPTIMIZATION PIPELINE:
======================================================================
Stage                    Old Pipeline    New Pipeline    Improvement
----------------------------------------------------------------------
Unoptimized             510,208         461,568         -48,640 (-9.5%)
Basic optimizer         422,248         412,008         -10,240 (-2.4%)
Advanced optimizer      270,680         260,440          -9,240 (-3.4%)
MAJ rewriter            256,249         246,072         -10,177 (-4.0%)
Constant propagation    250,931         241,057          -9,874 (-3.9%)
======================================================================

FINAL RESULTS:
  Old best:     250,931 gates
  New best:     241,057 gates
  TOTAL SAVED:   9,874 gates (3.9% additional reduction)

Overall reduction from original: 52.8% (510,208 → 241,057)

All 35 verification tests passed!

IMPLEMENTATION:
1. Modified sha256_circuit_generator.py:
   - Changed ch() function to emit CH as native operation
   - Functions.txt reduced from 2,864 → 2,672 lines

2. Modified convert-to-nands.py:
   - Added convert_ch() with optimal 4-NAND implementation
   - Per bit: nand_ef, not_e, nand_noteg, result (4 gates total)

3. Files generated:
   - nands.txt: 461,568 gates (new unoptimized)
   - nands-final-ch4.txt: 241,057 gates (new fully optimized)
